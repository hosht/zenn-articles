---
title: "GitHubã®ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³ã™ã‚‹æ–¹æ³•3é¸"
emoji: "ğŸ”‘"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [git, github]
published: true
---

GitHubä¸Šã«ãƒ›ã‚¹ãƒˆã•ã‚Œã¦ã„ã‚‹ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³ã™ã‚‹ãŸã‚ã«ã€èªè¨¼æ–¹å¼ã«ã¤ã„ã¦å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§ã—ãŸã¨ã“ã‚ã€ã“ã‚Œã¾ã§ç­†è€…ãŒåˆ©ç”¨ã—ã¦ã„ãŸæ–¹å¼ã‹ã‚‰æ›´æ–°ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã«æ°—ã¥ãã¾ã—ãŸã€‚

https://docs.github.com/en/get-started/getting-started-with-git/caching-your-github-credentials-in-git

ãƒªãƒ³ã‚¯ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’èª­ã‚ã°ãã‚Œã§çµ‚ã‚ã‚Šãªè©±ã§ã¯ã‚ã‚Šã¾ã™ãŒã€ç­†è€…ã®ã‚ˆã†ã«æ›´æ–°ã«æ°—ã¥ã‹ãšæ¨å¥¨ã•ã‚Œãªã„æ–¹å¼ã§èªè¨¼ã—ã¦ã„ã‚‹æ–¹ãŒã„ã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã®ã§ã€ãã‚Œãã‚Œã®ç°¡æ˜“ãªãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã¨æ‰€æ„Ÿã‚’æ›¸ãã¾ã™ã€‚

## GitHub CLI

`gh`ã§ãŠé¦´æŸ“ã¿ã®GitHub CLIã¯ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³ã‚‚å¯èƒ½ã§ã™ã€‚
ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ãªã©ã‹ã‚‰ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã‚‰èªè¨¼ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

```sh
$ gh auth login
```

:::message
GitHub Personal Access Token(PAT)ã®ç™ºè¡Œã‚’æ±‚ã‚ã‚‰ã‚Œã¾ã™ãŒã€è¨˜äº‹åŸ·ç­†æ™‚ç‚¹ã§æ–°ã—ã„PATã®å½¢å¼ã§ã‚ã‚‹fine-grained personal access tokensã«GitHub CLIã¯å¯¾å¿œã—ã¦ã„ã¾ã›ã‚“ã€‚
è©³ç´°ã¯ãƒªãƒ³ã‚¯ã®Discussionsã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚
https://github.com/community/community/discussions/36441
:::

```sh
# èªè¨¼ã®ç¢ºèª
$ gh auth status
# ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³
# zenn-dev/zenn-editorã¯ãƒ‘ãƒ–ãƒªãƒƒã‚¯ãƒªãƒã‚¸ãƒˆãƒªãªã®ã§è¨­å®šãŒå¤±æ•—ã—ã¦ã„ã¦ã‚‚ã‚¯ãƒ­ãƒ¼ãƒ³ã§ãã‚‹ç‚¹ã«æ³¨æ„
$ gh repo clone https://github.com/zenn-dev/zenn-editor
```

### GoodğŸ™†

- ã‚¯ãƒ­ãƒ¼ãƒ³ã¾ã§ã®ã‚¹ãƒ†ãƒƒãƒ—ãŒçŸ­ã„

### Not GoodğŸ™…

- ã“ã®è¨˜äº‹ã§ã¯ã€ŒGitHubã®ã€ã¨ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚’çµã£ã¦ã¯ã„ã¾ã™ãŒGitHubä»¥å¤–ã§ã¯ä½¿ãˆãªã„
- Gitã‚³ãƒãƒ³ãƒ‰ã®ä½¿ã„åˆ†ã‘ãŒå¿…è¦ã«ãªã‚‹

## Git Credential Manager(ãŠã™ã™ã‚)

MicrosoftãŒé–‹ç™ºã—ã¦ã„ã‚‹Git Credential Manager(GCM)ã‚’åˆ©ç”¨ã™ã‚‹ã¨ã€PATã‚’ç™ºè¡Œã›ãšã«èªè¨¼ã§ãã¾ã™ã€‚

https://github.com/GitCredentialManager/git-credential-manager

```sh
# macOSã§homebrewã‚’ä½¿ã£ãŸã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ä¾‹
$ brew install git
$ brew tap microsoft/git
$ brew install --cask git-credential-manager-core
```

:::message
brew installæ™‚ã«ã‚°ãƒ­ãƒ¼ãƒãƒ«ã®.gitconfigã«è¿½è¨˜ãƒ»å‰Šé™¤ã•ã‚Œã‚‹ã®ã§ã€æ—¢å­˜ã®è¨­å®šã¨ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆã—ã¦ã„ã‚‹å ´åˆã¯é©å®œèª¿æ•´ã—ã¾ã™ã€‚
:::

```diff sh:.gitconfig
+ [credential]
+     helper =
+     helper = /usr/local/share/gcm-core/git-credential-manager-core
+ [credential "https://dev.azure.com"]
+     useHttpPath = true
```

Azure DevOpsã‚’ä½¿ã‚ãªã„äººã¯`https://dev.azure.com`ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¯ä¸è¦ã§ã™ã€‚
OSã«ã‚ˆã£ã¦ã‚³ãƒãƒ³ãƒ‰ã®ãƒ‘ã‚¹ã¯å¤‰ã‚ã‚‹ã®ã§ã€ã©ã®PATHã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸã‹ã¯ç¢ºèªã—ã¾ã™ã€‚

```sh
# (ã‚ªãƒ—ã‚·ãƒ§ãƒ³)configureã‚³ãƒãƒ³ãƒ‰ã§ã‚‚è¨­å®šå¯
$ git-credential-manager-core configure
```

```sh
# åˆå›ã‚¯ãƒ­ãƒ¼ãƒ³æ™‚ã«OAuthã«ã‚ˆã‚‹èªè¨¼ãŒè¡Œã‚ã‚Œã¾ã™
$ git clone https://github.com/zenn-dev/zenn-editor
```

### GoodğŸ™†

- GitHub PATã®ç™ºè¡ŒãŒä¸è¦
- GitHubä»¥å¤–ã«ã‚‚å¯¾å¿œ

### Not GoodğŸ™…

- .gitconfigã§è¨­å®šãŒå¿…è¦ãªãŸã‚ã€ä¸æ…£ã‚Œãªãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯æ‰‹é–“å–ã‚‹å¯èƒ½æ€§ãŒè€ƒãˆã‚‰ã‚Œã‚‹

## sshã§èªè¨¼

ãŠé¦´æŸ“ã¿éµäº¤æ›æ–¹å¼ã«ã‚ˆã‚‹èªè¨¼ã§ã™ã€‚

https://docs.github.com/en/authentication/connecting-to-github-with-ssh


å…¬å¼ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã‚‚ç§˜å¯†éµã¯EdDSAã§ä½œæˆã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã«å¤‰ã‚ã£ã¦ã„ã¾ã—ãŸã€‚
æ˜”RSA 2048ã§ä½œæˆã—ãŸéµã‚’ãšã£ã¨åˆ©ç”¨ã•ã‚Œã¦ã„ã‚‹å ´åˆã¯æš—å·å¼·åº¦ãŒååˆ†ã§ãªã„ãŸã‚ã€ä½œæˆã—ç›´ã™ã“ã¨ã‚’ãŠã™ã™ã‚ã—ã¾ã™ã€‚

```sh
$ ssh-keygen -t ed25519 -C "your_email@example.com"
$ eval "$(ssh-agent -s)"
$ open ~/.ssh/config
```

`~/.ssh/config`ã‚’ã“ã‚“ãªæ„Ÿã˜ã§ä½œæˆorè¿½è¨˜

```text:~/.ssh/config
Host *.github.com
  AddKeysToAgent yes
  UseKeychain yes
  IdentityFile ~/.ssh/id_ed25519
```

:::message
ã“ã®å¾ŒBad configuration option: usekeychainã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹å ´åˆã¯"UseKeychain yes"ã®å‰ã«"IgnoreUnknown UseKeychain"ã‚’è¿½åŠ ã—ã¾ã™
:::

å…¬é–‹éµã¯GitHub CLIã‹ã‚‰ç™»éŒ²å¯èƒ½ã§ã™ã€‚

```sh
$ ssh-add ~/.ssh/id_ed25519
$ gh ssh-key add ~/.ssh/id_ed25519.pub
# æ¥ç¶šç¢ºèª
$ ssh -T git@github.com
$ git clone git@github.com:zenn-dev/zenn-editor.git
```

ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«ãªã©ã§22ç•ªãƒãƒ¼ãƒˆãŒå¡ãŒã‚Œã¦ã„ã‚‹å ´åˆã¯ssh over httpsã§ã‚‚èªè¨¼ã§ãã¾ã™ã€‚

```text:~/.ssh/config
Host github.com
  Hostname ssh.github.com
  Port 443
  User git
  AddKeysToAgent yes
  UseKeychain yes
  IdentityFile ~/.ssh/id_ed25519
```

```sh
# æ¥ç¶šç¢ºèª
$ ssh -T -p 443 git@ssh.github.com
# URLãŒssh.github.comãªç‚¹ã«æ³¨æ„
$ git clone git@ssh.github.com:zenn-dev/zenn-editor.git
```

ä»Šå›ã¯ç´¹ä»‹ã™ã‚‹ã ã‘ã«ã¨ã©ã‚ã¾ã™ãŒã€YubiKeyã®ã‚ˆã†ãªU2Fã€FIDO2ã«å¯¾å¿œã—ãŸã‚’éµã‚’èªè¨¼ã«åˆ©ç”¨ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚
https://www.yubico.com/blog/github-now-supports-ssh-security-keys/

### GoodğŸ™†

- httpsã‚’æä¾›ã—ã¦ã„ãªã„ãƒªãƒ¢ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªã‚‚åˆ©ç”¨å¯
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚­ãƒ¼ã¨çµ„ã¿åˆã‚ã›ã‚‹ã¨ã‚ˆã‚Šã‚»ã‚­ãƒ¥ã‚¢ãªèªè¨¼ãŒã§ãã‚‹

### Not GoodğŸ™…

- è¨­å®šæ‰‹é †ã€é …ç›®ãŒå¤šã„
- ç§˜å¯†éµã®å–ã‚Šæ‰±ã„ã«æ³¨æ„ãŒå¿…è¦

## ã¾ã¨ã‚

GitHub(github.com)ã®ã¿ã®åˆ©ç”¨ã§ã‚ã‚Œã°GCMã®åˆ©ç”¨ãŒè¨­å®šæ‰‹é †ã€å¯ç”¨æ€§ã‚ãŸã‚Šã®ãƒãƒ©ãƒ³ã‚¹ãŒå–ã‚Œã¦ã„ã‚‹ã¨æ€ã„ã¾ã™ã€‚
